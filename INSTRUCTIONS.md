# Инструкция по запуску VideoChat

## Быстрый старт

### 1. Установка зависимостей

Откройте терминал в папке проекта и выполните:

```bash
npm install
```

Это установит все необходимые пакеты:
- express (веб-сервер)
- ws (WebSocket для реального времени)
- cors (для CORS)
- bcryptjs (шифрование паролей)
- jsonwebtoken (JWT токены)

### 2. Запуск сервера

```bash
npm start
```

Или для автоматической перезагрузки при изменениях:

```bash
npm run dev
```

Сервер запустится на `http://localhost:3000`

### 3. Открытие приложения

Откройте файл `index.html` в браузере. Рекомендуется использовать локальный сервер:

**Вариант 1: Использовать VS Code Live Server**
- Установите расширение "Live Server"
- Правый клик на `index.html` → "Open with Live Server"

**Вариант 2: Использовать Python (если установлен)**
```bash
python -m http.server 8080
```
Затем откройте `http://localhost:8080`

**Вариант 3: Использовать Node.js http-server**
```bash
npx http-server . -p 8080
```

### 4. Использование приложения

1. **Регистрация**: Создайте новый аккаунт с именем, email и паролем
2. **Вход**: Войдите используя email и пароль
3. **Контакты**: Откройте приложение в другом браузере/вкладке и зарегистрируйте второго пользователя
4. **Чат**: Выберите контакт и начните общение
5. **Звонки**: Нажмите кнопку видеозвонка или аудиозвонка

## Важные замечания

### Для видеозвонков требуется HTTPS

WebRTC требует безопасное соединение (HTTPS) для работы с камерой и микрофоном. Исключения:
- `localhost` - работает без HTTPS
- `127.0.0.1` - работает без HTTPS

Для продакшена используйте HTTPS или сервисы вроде ngrok для туннелирования.

### Офлайн режим

Приложение работает даже если сервер недоступен:
- Регистрация и вход используют localStorage
- Сообщения сохраняются локально
- Видеозвонки требуют WebSocket соединения

### Безопасность

В продакшене обязательно:
- Измените `JWT_SECRET` в `server.js`
- Используйте базу данных вместо массива в памяти
- Добавьте валидацию и санитизацию входных данных
- Используйте HTTPS

## Устранение проблем

### Звонки не работают
- Убедитесь, что сервер запущен
- Проверьте разрешения браузера на доступ к камере/микрофону
- Используйте HTTPS или localhost

### Сообщения не отправляются
- Проверьте подключение WebSocket (должно быть в консоли браузера)
- Убедитесь, что сервер запущен

### Пользователи не видят друг друга
- Зарегистрируйте несколько пользователей в разных браузерах/вкладках
- Обновите список контактов

